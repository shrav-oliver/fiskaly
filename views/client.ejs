<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/d8ede641aa.js" crossorigin="anonymous"></script>  
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.3.0/jquery.form.min.js" integrity="sha384-qlmct0AOBiA2VPZkMY3+2WqkHtIQ9lSdAsAn5RUJD/3vA5MKDgSGcdmIv4ycVxyn" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/css/existing.css">
    <title>List Of Clients</title>
</head>
<body>
    <p id = "appTitle">Fiskaly</p>
    <div id = "rectangle">
        <div id = "clientDetails">
            <p>Client details</p>
                <form id = "clientForm" action = "/clientdetails" method = "POST">
                    <span class = "clientSpan">
                        <label for="serial">Serial Number</label>
                        <input id="serial" class = "clientInput" type="text" name="serial" placeholder="<%= client.serial_number %>" value = "<%= client.serial_number %>" readonly="true">
                    </span><br>
                    <span class = "clientSpan">
                        <label for="state">State</label>
                        <input id="state" class = "clientInput" type="text" name="state" placeholder="<%= client.state %>" value = "<%= client.state %>" readonly="true"><br>
                    </span><br>
                    <span class = "clientSpan">
                        <label for="tssid">TSS ID</label>
                        <input id="tssid" class = "clientInput" type="text" name="tssid" placeholder="<%= client.tss_id %>" value = "<%= client.tss_id %>" readonly="true">
                    </span><br>
                    <span class = "clientSpan">
                        <label for="id">ID</label>
                        <input id="id" class = "clientInput" type="text" name="id" placeholder="<%= client._id %>" value = "<%= client._id %>" readonly="true">
                    </span><br>
                    <span class = "clientSpan">
                        <label for="type">Type</label>
                        <input id="type" class = "clientInput" type="text" name="type" placeholder="<%= client._type %>" value = "<%= client._type %>" readonly="true">
                    </span><br><span class = "clientSpan">
                        <label for="env">Env</label>
                        <input id="env" class = "clientInput" type="text" name="env" placeholder="<%= client._env %>" value = "<%= client._env %>" readonly="true">
                    </span><br>
                    <span class = "clientSpan">
                        <label for="version">Version</label>
                        <input id="version" class = "clientInput" type="text" name="version" placeholder="<%= client._version %>" value = "<%= client._version %>" readonly="true">
                    </span><br>
                    <span class = "clientSpan">
                        <label for="timecr">Time of Creation</label>
                        <input id="timecr" class = "clientInput" type="text" name="timecr" placeholder="<%= client.time_creation %>" value = "<%= client.time_creation %>" readonly="true">
                    </span><br>
                    <span class = "clientSpan">
                        <label for="timeup">Time of Update</label>
                        <input id="timeup" class = "clientInput" type="text" name="timeup" placeholder="<%= client.time_update %>" value = "<%= client.time_update %>" readonly="true">
                    </span><br>
                    <div class = "clientButtons"> 
                        <button id="clientlist" type="submit" name = "action" value = "clientlist" formaction = "/setup/clients"><i id="bin_icon" class="far fa-folder" ></i></i>Back to Client List</button>
                        <button id="update_client" type="submit" name = "action" value = "update"><i id="bin_icon" class="far fa-trash-alt"></i></i>Update Client Details</button>
                        <button id="retrieve_metadata" type="submit" name = "action" value = "getmetadata" formaction = "/setup/clientmetadata"><i id="bin_icon" class="far fa-trash-alt"></i></i>Retrieve Metadata</button><br>
                    </div>
                    <span class = "metaInput">
                        <label for="prop1">Property</label>
                        <input id="prop1" type="text" name="prop1" placeholder="Enter first property name" >
                    </span>
                    <span class = "metaInput">
                        <label for="val1">Value</label>
                        <input id="val1" type="text" name="prop1" placeholder="Enter first property value" >
                    </span>
                    <button id="update_metadata" type="submit" name = "action" value = "postmetadata"><i id="bin_icon" class="far fa-folder"></i></i>Update Metadata</button>
                </form>
        </div>

                
                    <% if (transactions.length > 0){ %>
                        <p id = "transactionList">Transactions List</p>
                        <div id = "txn_div">
                        <% for (var i = 0; i < transactions.length; i++){ %>
                            <form>
                                <span class="transactionspan">
                                    <label for="number">Number</label>
                                    <input id="number" type="text" name="number" placeholder="<%= transactions[i].number %>" value = "<%= transactions[i].number %>" readonly="true">
                                </span>
                                <span class="transactionspan">
                                    <label for="time_start">Start time of Txn</label>
                                    <input id="time_start" type="text" name="time_start" placeholder="<%= transactions[i].time_start %>" value = "<%= transactions[i].time_start %>" readonly="true">
                                </span>
                                <span class="transactionspan">
                                    <label for="time_end">End time of Txn</label>
                                    <input id="time_end" type="text" name="time_end" placeholder="<%= transactions[i].time_end %>" value = "<%= transactions[i].time_end %>" readonly="true">
                                </span>
                                <button id="retrieve_transaction" type="submit" name = "action" value = "retrieve"><i id="bin_icon" class="far fa-folder"></i></i>Go to Transaction</button>   
                            </form>
                        <% } %>
                        </div>
                    <% } %>
                
    </div>
</body>
</html>